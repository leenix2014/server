DROP DATABASE IF EXISTS poker;
CREATE DATABASE poker;
USE poker;
DROP TABLE IF EXISTS AGENT;
CREATE TABLE AGENT
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '代理ID, Agent ID',
LOGIN_ID VARCHAR(255) NOT NULL COMMENT '代理登陆ID',
PARENT_AGENT_ID VARCHAR(255) COMMENT '父级代理ID，Parent Agent ID',
NAME VARCHAR(255) NOT NULL COMMENT '代理名字，Agent Name',
PWD VARCHAR(255) NOT NULL COMMENT '密码，Password',
PHONE VARCHAR(255) NOT NULL COMMENT '代理手机，Phone',
ROOM_CARD_COUNT INT NOT NULL DEFAULT 0 COMMENT '房卡数, Room Card Count',
COIN_COUNT INT NOT NULL DEFAULT 0 COMMENT '金币数',
LEVEL INT NOT NULL COMMENT '代理级别，Agent Level',
DISCOUNT VARCHAR(255) NOT NULL COMMENT '折扣比例',
IS_ADMIN BOOLEAN NOT NULL DEFAULT false COMMENT '是否是管理员',
CREATE_TIME DATETIME NOT NULL COMMENT '创建时间',
DELETED BOOLEAN NOT NULL DEFAULT false COMMENT '是否已被删除',
DELETE_TIME DATETIME COMMENT '删除时间',
PRIMARY KEY(ID),
UNIQUE KEY `UNI_ID`(ID),
UNIQUE KEY `UNI_AGENT_LOGIN`(LOGIN_ID, DELETE_TIME),
UNIQUE KEY `UNI_AGENT_NAME`(NAME, DELETE_TIME),
UNIQUE KEY `UNI_AGENT_PHONE`(PHONE, DELETE_TIME)
)COMMENT'房卡销售代理表';

DROP TABLE IF EXISTS USERS;
CREATE TABLE USERS
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '用户ID,User ID',
LOGIN_ID VARCHAR(255) NOT NULL COMMENT '用户登陆ID',
AGENT_ID VARCHAR(255) DEFAULT '' COMMENT '代理登陆ID',
NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
LANG VARCHAR(20) NOT NULL DEFAULT 'zh_CN' COMMENT '用户语种',
RANK INT NOT NULL DEFAULT 1 COMMENT '用户等级',
PWD  VARCHAR(255) NOT NULL COMMENT '用户密码，User Password',
COUNTRY_CODE VARCHAR(20) NOT NULL DEFAULT '' COMMENT '国家码',
PHONE VARCHAR(255) NOT NULL COMMENT '用户电话，Phone',
FB_ID VARCHAR(255) NOT NULL COMMENT 'Facebook ID',
ROOM_CARD_COUNT INT NOT NULL DEFAULT 0 COMMENT '房卡数, Room Card Count',
COIN_COUNT INT NOT NULL DEFAULT 0 COMMENT '金币数',
WIN_COUNT INT(20) NOT NULL DEFAULT 0 COMMENT '赢钱数',
SID INT NOT NULL DEFAULT '0' COMMENT '登陆方式, 0=token 1=游客 2=FB 3=手机登陆',
OS VARCHAR(255) NOT NULL DEFAULT '' COMMENT '客户端操作系统',
PHONE_TYPE VARCHAR(255) NOT NULL DEFAULT '' COMMENT '手机型号',
REG_IP VARCHAR(255) NOT NULL DEFAULT '' COMMENT '注册IP',
LAST_IP VARCHAR(255) NOT NULL DEFAULT '' COMMENT '上一次登录IP',
MAC_ID VARCHAR(255) NOT NULL COMMENT '设备唯一id',
GENDER INT NOT NULL DEFAULT '0' COMMENT '性别',
AVATAR_ID INT NOT NULL DEFAULT '0' COMMENT '头像ID',
CREATE_TIME DATETIME NOT NULL COMMENT '创建时间',
PRIMARY KEY(ID),
UNIQUE KEY `UNI_USER_LOGIN`(LOGIN_ID),
UNIQUE KEY `ID`(ID)
)COMMENT'游戏用户表';

DROP TABLE IF EXISTS TOPUP_RECORD;
CREATE TABLE TOPUP_RECORD
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '充值记录ID,',
FROM_ID VARCHAR(255) NOT NULL COMMENT '转出方ID',
FROM_NAME VARCHAR(255) NOT NULL COMMENT '转出方姓名',
FROM_AGENT BOOLEAN NOT NULL DEFAULT true COMMENT '转出方是代理',
TO_ID VARCHAR(255) NOT NULL COMMENT '转入方ID',
TO_NAME VARCHAR(255) NOT NULL COMMENT '转入方姓名',
TO_AGENT BOOLEAN NOT NULL DEFAULT false COMMENT '转入方是代理',
AMOUNT INT NOT NULL COMMENT '房卡转账数量',
FROM_BAL INT(20) NOT NULL COMMENT '转出方余额',
TO_BAL INT(20) NOT NULL COMMENT '转入方余额',
TOPUP_TIME DATETIME NOT NULL COMMENT '创建时间',
IS_ADMIN BOOLEAN NOT NULL DEFAULT false COMMENT '是否是管理员充值',
PRIMARY KEY(ID)
)COMMENT'房卡充值记录表';

DROP TABLE IF EXISTS WITHDRAW_RECORD;
CREATE TABLE WITHDRAW_RECORD
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '充值记录ID,',
AGENT_ID VARCHAR(255) NOT NULL COMMENT '代理ID',
AGENT_NAME VARCHAR(255) NOT NULL COMMENT '代理姓名',
USER_ID VARCHAR(255) NOT NULL COMMENT '提现者ID',
USER_NAME VARCHAR(255) NOT NULL COMMENT '提现者姓名',
IS_AGENT BOOLEAN NOT NULL DEFAULT false COMMENT '提现者是否代理',
AMOUNT INT NOT NULL COMMENT '金币提现数量',
AGENT_BAL INT(20) NOT NULL COMMENT '代理方余额',
USER_BAL INT(20) NOT NULL COMMENT '提现方余额',
WITHDRAW_TIME DATETIME NOT NULL COMMENT '创建时间',
IS_ADMIN BOOLEAN NOT NULL DEFAULT false COMMENT '是否是管理员提现',
PRIMARY KEY(ID)
)COMMENT'金币提现记录表';

DROP TABLE IF EXISTS INVITE_RECORD;
CREATE TABLE INVITE_RECORD
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '邀请记录ID',
INVITER_ID INT NOT NULL COMMENT '邀请者登录ID',
INVITER_ROOM VARCHAR(255) NOT NULL COMMENT '邀请者房间号',
VISITOR_IP VARCHAR(255) NOT NULL COMMENT '被邀请者IP',
VISITOR_MAC VARCHAR(255) NOT NULL COMMENT '被邀请者MAC地址',
VISIT_TIME DATETIME NOT NULL COMMENT '邀请链接打开时间',
VISITOR_ID INT COMMENT '被邀请者注册后的登录ID',
CLICK_COUNT INT NOT NULL DEFAULT 0 COMMENT '链接点击次数',
PRIMARY KEY(ID)
)COMMENT'邀请记录表';

DROP TABLE IF EXISTS APP_VERSION;
CREATE TABLE APP_VERSION
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
APP_VER VARCHAR(10) NOT NULL COMMENT '客户端版本号，如1.0.1',
PLATFORM VARCHAR(20) NOT NULL COMMENT '平台，1=iOS 2=Android',
LATEST BOOLEAN NOT NULL DEFAULT FALSE COMMENT '最新版',
MUST_UPDATE BOOLEAN NOT NULL DEFAULT FALSE COMMENT '强制更新',
DOWNLOAD_URL VARCHAR(500) NOT NULL DEFAULT '' COMMENT '下载地址',
CREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
UPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'客户端版本表';

DROP TABLE IF EXISTS COMMON_CONFIG;
CREATE TABLE COMMON_CONFIG (
  ID INT NOT NULL AUTO_INCREMENT,
  CONFIG_KEY varchar(255) NOT NULL COMMENT 'key',
  CONFIG_VALUE varchar(255) NOT NULL COMMENT '参数',
  REMARK varchar(255) NOT NULL DEFAULT '' COMMENT '备注',
  PRIMARY KEY (ID),
  UNIQUE KEY (ID)
) COMMENT='公共配置表';

DROP TABLE IF EXISTS LOGIN_CONFIG;
CREATE TABLE LOGIN_CONFIG (
  ID INT NOT NULL AUTO_INCREMENT COMMENT '自增id',
  DAY INT NOT NULL DEFAULT '0' COMMENT '天数',
  ROOM_CARD INT NOT NULL DEFAULT '0' COMMENT '奖励的房卡数',
  PRIMARY KEY (ID),
  UNIQUE KEY (ID)
) COMMENT='登录奖励配置表';

DROP TABLE IF EXISTS LOGIN_RECORD;
CREATE TABLE LOGIN_RECORD (
  ID INT NOT NULL AUTO_INCREMENT COMMENT 'id',
  USER_ID INT NOT NULL COMMENT '用户id',
  USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
  LOGIN_DAY INT NOT NULL DEFAULT '0' COMMENT '连续登陆了几天',
  GOT_REWART_DAY VARCHAR(255) NOT NULL COMMENT '已经领取奖励的天数',
  LAST_LOGIN_DATE DATETIME NOT NULL COMMENT '最后一次登陆时间',
  PRIMARY KEY (ID),
  UNIQUE KEY (ID)
) COMMENT='用户登录记录表';

DROP TABLE IF EXISTS TASK_CONFIG;
CREATE TABLE TASK_CONFIG (
  ID INT NOT NULL AUTO_INCREMENT COMMENT '自增id',
  TASK_ID INT NOT NULL DEFAULT '0' COMMENT '任务id',
  TYPE INT NOT NULL DEFAULT '0' COMMENT '任务类型',
  FINISH_COUNT INT NOT NULL DEFAULT '0' COMMENT '完成该任务需要完成的次数',
  ROOM_CARD INT NOT NULL DEFAULT '0' COMMENT '奖励的房卡数',
  DESC_ZH VARCHAR(255) NOT NULL COMMENT '任务描述',
  DESC_EN VARCHAR(255) NOT NULL COMMENT '任务英文描述',
  SHOW_ORDER INT NOT NULL DEFAULT '999' COMMENT '任务展示顺序',
  PRIMARY KEY (ID),
  UNIQUE KEY ID (ID) USING BTREE
) COMMENT='任务奖励配置表';

DROP TABLE IF EXISTS TASK_RECORD;
CREATE TABLE TASK_RECORD (
  ID INT NOT NULL AUTO_INCREMENT COMMENT '自增id',
  USER_ID INT NOT NULL DEFAULT '0' COMMENT '用户id',
  USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
  TYPE INT NOT NULL DEFAULT '0' COMMENT '任务类型',
  CUR_TASK_ID INT NOT NULL DEFAULT '0' COMMENT '任务id',
  CUR_TASK_NAME VARCHAR(255) NOT NULL DEFAULT '' COMMENT '任务描述',
  DONE_COUNT INT NOT NULL DEFAULT '0' COMMENT '完成次数',
  IS_GOT_PRIZE INT NOT NULL DEFAULT '0' COMMENT '是否领取了奖励',
  PRIMARY KEY (ID),
  UNIQUE KEY (ID)
) COMMENT='任务完成记录表';

DROP TABLE IF EXISTS PRIZE_CONFIG;
CREATE TABLE PRIZE_CONFIG
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
PRIZE_ID INT NOT NULL COMMENT '奖品逻辑ID',
TYPE INT NOT NULL COMMENT '奖品类型，1=房卡 2=抽奖次数',
COUNT INT NOT NULL COMMENT '奖品数量',
DESC_ZH VARCHAR(255) NOT NULL COMMENT '奖品中文描述',
DESC_EN VARCHAR(255) NOT NULL COMMENT '奖品英文描述',
SHOW_ORDER INT NOT NULL DEFAULT 999 COMMENT '奖品显示顺序号',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'抽奖奖品配置';

DROP TABLE IF EXISTS PRIZE_RECORD;
CREATE TABLE PRIZE_RECORD
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
USER_ID VARCHAR(255) NOT NULL COMMENT '用户ID',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
DRAW_TIME DATETIME NOT NULL COMMENT '抽奖时间',
PRIZE_ID INT NOT NULL COMMENT '中奖奖品ID',
PRIZE_NAME VARCHAR(255) NOT NULL COMMENT '奖品描述',
DRAW_COUNT INT NOT NULL COMMENT '剩余抽奖次数',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'抽奖记录';

DROP TABLE IF EXISTS USER_DRAW_COUNT;
CREATE TABLE USER_DRAW_COUNT
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
USER_ID VARCHAR(255) NOT NULL COMMENT '用户ID',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
DRAW_DATE VARCHAR(255) NOT NULL COMMENT '抽奖日期',
DRAW_COUNT INT NOT NULL COMMENT '抽奖次数',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'用户抽奖次数';

DROP TABLE IF EXISTS ROOM_CONFIG;
CREATE TABLE ROOM_CONFIG
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
ROOM_ID INT NOT NULL COMMENT '房间号',
GAME INT NOT NULL COMMENT '游戏类型，1=牛牛；2=三五张',
OWNER INT NOT NULL COMMENT '房主，users表的loginId',
OWNER_NAME VARCHAR(255) NOT NULL COMMENT '房主名称,User Name',
DEALER_TYPE VARCHAR(255) NOT NULL COMMENT '坐庄类型',
BSCORES INT NOT NULL DEFAULT 1 COMMENT '底分',
SEATS INT NOT NULL DEFAULT 5 COMMENT '最大座位数',
INNINGS INT NOT NULL COMMENT '总局数',
PMSCORES INT NOT NULL DEFAULT 0 COMMENT '闲家封顶分',
DMSCORES INT NOT NULL DEFAULT 0 COMMENT '庄家封顶分',
BLIND BOOLEAN NOT NULL DEFAULT TRUE COMMENT '不看牌下注',
MAX_BET INT NOT NULL DEFAULT 5 COMMENT '最大下注倍数',
HAS_GHOST BOOLEAN NOT NULL DEFAULT FALSE COMMENT '有鬼牌',
DRAW_PERCENT SMALLINT NOT NULL DEFAULT 2 COMMENT '抽水百分比',
COIN_ROOM BOOLEAN NOT NULL DEFAULT FALSE COMMENT '是否金币场私人房',
STATUS INT NOT NULL DEFAULT 0 COMMENT '0=running;1=innings up;2=dismissed;3=player reach top;4=dealer reach top',
CREATE_TIME DATETIME NOT NULL COMMENT '房间创建时间',
END_TIME DATETIME NOT NULL COMMENT '房间结束时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'游戏房间配置表';

DROP TABLE IF EXISTS ROOM_INNINGS;
CREATE TABLE ROOM_INNINGS
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
ROOM_ID INT NOT NULL COMMENT '房间号',
INNING INT NOT NULL DEFAULT 1 COMMENT '当前游戏局数',
USER_ID INT NOT NULL COMMENT '用户loginId',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
SEAT_ID INT NOT NULL COMMENT '座位号',
USER_BET INT NOT NULL DEFAULT 1 COMMENT '用户下注倍数',
USER_GRAB INT NOT NULL DEFAULT 1 COMMENT '用户抢庄倍数',
CARDS VARCHAR(255) NOT NULL COMMENT '玩家手牌',
SHOW_HAND_CARDS VARCHAR(255) NOT NULL COMMENT '玩家摊牌组合',
MIDDLE_CARD_TYPE VARCHAR(255) NOT NULL COMMENT '牌型',
CARD_TYPE VARCHAR(255) NOT NULL COMMENT '牌型',
MIDDLE_SCORE INT NOT NULL DEFAULT 0 COMMENT '35张3张时分数',
MIDDLE_TOTAL INT NOT NULL DEFAULT 0 COMMENT '35张3张时总分',
MIDDLE_DRAW FLOAT NOT NULL DEFAULT 0 COMMENT '三张阶段抽水',
END_SCORE INT NOT NULL DEFAULT 0 COMMENT '单局输赢',
END_TOTAL INT NOT NULL DEFAULT 0 COMMENT '总分',
END_DRAW FLOAT NOT NULL DEFAULT 0 COMMENT '五张阶段抽水',
IS_DEALER BOOLEAN NOT NULL DEFAULT FALSE COMMENT '本局是否庄家',
STATUS INT NOT NULL DEFAULT 0 COMMENT '0=running;1=innings up;2=dismissed;3=player reach top;4=dealer reach top;5=all user offline',
CREATE_TIME DATETIME NOT NULL COMMENT '本局开始时间',
END_TIME DATETIME NOT NULL COMMENT '本局结束时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'游戏表';
ALTER TABLE ROOM_INNINGS ADD INDEX (ROOM_ID, INNING, SEAT_ID, STATUS);

DROP TABLE IF EXISTS ROOM_CARD_BILL;
CREATE TABLE ROOM_CARD_BILL
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
USER_ID VARCHAR(255) NOT NULL COMMENT '用户loginId',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
SOURCE VARCHAR(50) NOT NULL COMMENT 'topup/transfer/signin/task/prize/consume',
SOURCE_ID VARCHAR(255) NOT NULL DEFAULT '0' COMMENT 'topup=FromId, transfer=ToId, signin=LoginDay, task=TaskId, prize=PrizeId, consume=RoomId',
SOURCE_NAME VARCHAR(255) NOT NULL DEFAULT '' COMMENT 'topup=FromName, transfer=ToName, signin=, task=TaskDesc, prize=PrizeDesc, consume=game',
AMOUNT INT NOT NULL COMMENT '获得或失去数量',
BEFORE_BAL INT NOT NULL COMMENT '操作前余额',
AFTER_BAL INT NOT NULL COMMENT '操作后余额',
CREATE_TIME DATETIME NOT NULL COMMENT '记录创建时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'房卡来源历史';

DROP TABLE IF EXISTS COIN_BILL;
CREATE TABLE COIN_BILL
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
USER_ID VARCHAR(255) NOT NULL COMMENT '用户loginId',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
SOURCE VARCHAR(50) NOT NULL COMMENT 'cube;',
SOURCE_ID VARCHAR(255) NOT NULL DEFAULT '0' COMMENT 'count',
SOURCE_NAME VARCHAR(255) NOT NULL DEFAULT '' COMMENT '',
AMOUNT INT NOT NULL COMMENT '获得或失去数量',
BEFORE_BAL INT NOT NULL COMMENT '操作前余额',
AFTER_BAL INT NOT NULL COMMENT '操作后余额',
CREATE_TIME DATETIME NOT NULL COMMENT '记录创建时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'金币来源历史';

DROP TABLE IF EXISTS SHOP_GOOD;
CREATE TABLE SHOP_GOOD
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
GOOD_ID VARCHAR(255) NOT NULL COMMENT '商品id',
GOOD_TYPE VARCHAR(50) NOT NULL DEFAULT 'roomcard' COMMENT 'roomcard or coin',
GOOD_COUNT INT NOT NULL DEFAULT 0 COMMENT '商品数量',
PRIMARY KEY(ID),
UNIQUE KEY(GOOD_ID)
)COMMENT'商品详情';

DROP TABLE IF EXISTS SHOP_ORDER;
CREATE TABLE SHOP_ORDER
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ORDER_ID VARCHAR(255) NOT NULL COMMENT 'uuid',
GOOD_ID VARCHAR(255) NOT NULL COMMENT '商品id',
ORDER_COUNT INT NOT NULL DEFAULT 1 COMMENT '下单数量',
PAY_METHOD VARCHAR(50) NOT NULL COMMENT '支付方式',
PAYED BOOLEAN NOT NULL DEFAULT false COMMENT '是否已支付',
DELIVERED BOOLEAN NOT NULL DEFAULT false COMMENT '是否已发货',
ORDER_TIME DATETIME NOT NULL COMMENT '下单时间',
DELIVER_TIME DATETIME NOT NULL COMMENT '发货时间',
PRIMARY KEY(ID),
UNIQUE KEY(ORDER_ID)
)COMMENT'商品订单';

DROP TABLE IF EXISTS ROULETTE_ROOM;
CREATE TABLE ROULETTE_ROOM
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ROOM_ID VARCHAR(20) NOT NULL COMMENT '轮盘房间配置ID',
CHANNEL VARCHAR(255) NOT NULL COMMENT '声网频道',
GAME_TYPE INT NOT NULL DEFAULT 37 COMMENT '37=欧式轮盘(默认) 38=美式轮盘 25=法式轮盘',
MIN_COIN INT NOT NULL COMMENT '加入房间最少金币数',
MIN_BET INT NOT NULL COMMENT '单次最小下注额',
MAX_BET INT NOT NULL COMMENT '单次最大下注额',
MAX_TOTAL_BET INT NOT NULL COMMENT '总最大下注额',
DRAW_PERCENT SMALLINT NOT NULL DEFAULT 2 COMMENT '抽水百分比',
READY_TIME INT NOT NULL DEFAULT 5 COMMENT '准备时长，以秒为单位',
BET_TIME INT NOT NULL DEFAULT 60 COMMENT '下注时长，以秒为单位',
PRIZE_TIME INT NOT NULL DEFAULT 5 COMMENT '开奖时长，以秒为单位',
PRIZED_TIME INT NOT NULL DEFAULT 15 COMMENT '开奖后时长，以秒为单位',
ADMIN_IDS VARCHAR(255) DEFAULT '' COMMENT '轮盘房间管理员',
CREATE_TIME DATETIME NOT NULL COMMENT '房间创建时间',
DELETED BOOLEAN NOT NULL DEFAULT false COMMENT '是否已被删除',
DELETE_TIME DATETIME COMMENT '删除时间',
PRIMARY KEY(ID),
UNIQUE KEY(ROOM_ID)
)COMMENT'轮盘房间';

DROP TABLE IF EXISTS ROULETTE;
CREATE TABLE ROULETTE
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ROOM_ID VARCHAR(20) NOT NULL COMMENT '轮盘房间配置ID',
BEGIN_BET_TIME DATETIME NOT NULL COMMENT '开始允许下注时间',
END_BET_TIME DATETIME NOT NULL COMMENT '停止下注时间',
BET_TOTAL INT NOT NULL DEFAULT 0 COMMENT '总下注金额',
REWARD_TIME DATETIME NOT NULL COMMENT '开奖时间',
RESULT INT NOT NULL DEFAULT -1 COMMENT '开奖结果',
REWARD_TOTAL INT NOT NULL DEFAULT 0 COMMENT '总奖励金额',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'轮盘记录';

DROP TABLE IF EXISTS ROULETTE_BET;
CREATE TABLE ROULETTE_BET
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ROOM_ID VARCHAR(20) NOT NULL COMMENT '轮盘房间配置ID',
ROULETTE_ID INT NOT NULL COMMENT '轮盘id',
USER_ID INT NOT NULL COMMENT '用户loginId',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
BET_ON VARCHAR(255) NOT NULL COMMENT '下注目标',
BET_COUNT INT NOT NULL DEFAULT 0 COMMENT '金币数',
REWARD INT NOT NULL DEFAULT 0 COMMENT '奖励金币数',
BET_TIME DATETIME NOT NULL COMMENT '下注时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'用户下注';

DROP TABLE IF EXISTS ROULETTE_BET_SUM;
CREATE TABLE ROULETTE_BET_SUM
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ROOM_ID VARCHAR(20) NOT NULL COMMENT '轮盘房间配置ID',
ROULETTE_ID INT NOT NULL COMMENT '轮盘id',
RESULT INT NOT NULL DEFAULT -1 COMMENT '开奖结果',
USER_ID INT NOT NULL COMMENT '用户loginId',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
BET_TOTAL INT NOT NULL DEFAULT 0 COMMENT '金币数',
REWARD_TOTAL INT NOT NULL DEFAULT 0 COMMENT '奖励金币数',
RECORD_TIME DATETIME NOT NULL COMMENT '下注时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'用户下注获奖历史';

DROP TABLE IF EXISTS BACCARAT_ROOM;
CREATE TABLE BACCARAT_ROOM
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ROOM_ID VARCHAR(20) NOT NULL COMMENT '百家乐房间配置ID',
CHANNEL VARCHAR(255) NOT NULL COMMENT '声网频道',
MIN_COIN INT NOT NULL COMMENT '加入房间最少金币数',
TAKE_SEAT_COIN INT NOT NULL DEFAULT 10000 COMMENT '坐下金币门槛',
MIN_BET INT NOT NULL COMMENT '单次最小下注额',
MAX_BET INT NOT NULL COMMENT '单次最大下注额',
MAX_RED INT NOT NULL COMMENT '限红',
TIE_PAIR_MIN_BET INT NOT NULL COMMENT '和、对子下限',
TIE_PAIR_MAX_BET INT NOT NULL COMMENT '和、对子上限',
DRAW_PERCENT SMALLINT NOT NULL DEFAULT 2 COMMENT '抽水百分比',
BET_TIME INT NOT NULL DEFAULT 60 COMMENT '下注时长，以秒为单位',
OVER_TIME INT DEFAULT 0 COMMENT '开奖后时长，以秒为单位',
ADMIN_IDS VARCHAR(255) DEFAULT '' COMMENT '百家乐房间管理员',
CREATE_TIME DATETIME NOT NULL COMMENT '房间创建时间',
DELETED BOOLEAN NOT NULL DEFAULT false COMMENT '是否已被删除',
DELETE_TIME DATETIME COMMENT '删除时间',
PRIMARY KEY(ID),
UNIQUE KEY(ROOM_ID)
)COMMENT'百家乐房间';

DROP TABLE IF EXISTS BACCARAT;
CREATE TABLE BACCARAT
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ROOM_ID VARCHAR(20) NOT NULL COMMENT '轮盘房间配置ID',
BEGIN_BET_TIME DATETIME NOT NULL COMMENT '开始允许下注时间',
END_BET_TIME DATETIME NOT NULL COMMENT '停止下注时间',
BET_TOTAL INT NOT NULL DEFAULT 0 COMMENT '总下注金额',
REWARD_TIME DATETIME NOT NULL COMMENT '开奖时间',
REWARD_TOTAL INT NOT NULL DEFAULT 0 COMMENT '总奖励金额',
BANKER_CARDS VARCHAR(255) NOT NULL DEFAULT '' COMMENT '庄家手牌',
PLAYER_CARDS VARCHAR(255) NOT NULL DEFAULT '' COMMENT '闲家手牌',
BANKER_2POINT INT NOT NULL DEFAULT -1 COMMENT '庄家点数',
PLAYER_2POINT INT NOT NULL DEFAULT -1 COMMENT '闲家点数',
BANKER_3POINT INT NOT NULL DEFAULT -1 COMMENT '庄家补牌点数',
PLAYER_3POINT INT NOT NULL DEFAULT -1 COMMENT '闲家补牌点数',
WIN_TARGETS VARCHAR(255) NOT NULL DEFAULT '' COMMENT '赢钱区域',
REMAINS INT NOT NULL DEFAULT -1 COMMENT '余牌',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'百家乐记录';

DROP TABLE IF EXISTS BACCARAT_BET;
CREATE TABLE BACCARAT_BET
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ROOM_ID VARCHAR(20) NOT NULL COMMENT '百家乐房间配置ID',
BACCARAT_ID INT NOT NULL COMMENT '百家乐id',
USER_ID INT NOT NULL COMMENT '用户loginId',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
BET_ON VARCHAR(255) NOT NULL COMMENT '下注目标',
BET_COUNT INT NOT NULL DEFAULT 0 COMMENT '金币数',
REWARD INT NOT NULL DEFAULT 0 COMMENT '奖励金币数',
BET_TIME DATETIME NOT NULL COMMENT '下注时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'百家乐下注';

DROP TABLE IF EXISTS BACCARAT_WAYBILL;
CREATE TABLE BACCARAT_WAYBILL
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ROOM_ID VARCHAR(20) NOT NULL COMMENT '百家乐房间配置ID',
LAST_BACC_ID INT NOT NULL COMMENT '百家乐id',
SIZE INT NOT NULL DEFAULT 0 COMMENT '总局数',
MAIN_ROAD VARCHAR(2000) NOT NULL DEFAULT '' COMMENT '大路',
DISH_ROAD VARCHAR(2000) NOT NULL DEFAULT '' COMMENT '珠盘路',
RECORD_TIME DATETIME NOT NULL COMMENT '记录时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'百家乐路单';

DROP TABLE IF EXISTS COIN_ROOM;
CREATE TABLE COIN_ROOM
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
ROOM_ID INT NOT NULL COMMENT '房间号',
MODE VARCHAR(50) NOT NULL DEFAULT 'dealer_none' COMMENT 'dealer_none=无庄不看牌下注  dealer_grab=抢庄看牌下注',
BASE_SCORE INT NOT NULL COMMENT '底分',
MIN_COIN INT NOT NULL COMMENT '最少金币数',
NEED_CHARGE_COIN INT NOT NULL DEFAULT 100 COMMENT '小于等于此金币数提示玩家充值',
KICK_OUT_COIN INT NOT NULL DEFAULT 0 COMMENT '小于等于此金币数时踢出玩家',
MAX_SEAT INT NOT NULL DEFAULT 8 COMMENT '最大座位数',
GRADE VARCHAR(20) NOT NULL COMMENT 'primary=初级场 junior=中级场 senior=高级场',
DRAW_PERCENT SMALLINT NOT NULL DEFAULT 2 COMMENT '抽水百分比',
ENCRYPTED BOOLEAN NOT NULL DEFAULT FALSE COMMENT '是否加密房间',
PWD VARCHAR(20) NOT NULL DEFAULT '' COMMENT '加密密码',
CREATE_TIME DATETIME NOT NULL COMMENT '房间创建时间',
PRIMARY KEY(ID),
UNIQUE KEY(ROOM_ID)
)COMMENT'金币场人工配置表';

DROP TABLE IF EXISTS COIN_ROOM_HISTORY;
CREATE TABLE COIN_ROOM_HISTORY
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
GAME_ID VARCHAR(255) NOT NULL COMMENT '牌局ID',
USER_ID INT NOT NULL COMMENT '用户loginId',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
ROOM_ID INT NOT NULL COMMENT '房间号',
SEAT_ID INT NOT NULL COMMENT '座位号',
BET INT NOT NULL DEFAULT 1 COMMENT '用户下注倍数',
GRAB INT NOT NULL DEFAULT 1 COMMENT '用户抢庄倍数',
PHASE VARCHAR(50) NOT NULL COMMENT '发牌阶段',
CARDS VARCHAR(255) NOT NULL COMMENT '玩家手牌',
CARD_TYPE INT NOT NULL COMMENT '牌型',
SCORE INT NOT NULL DEFAULT 0 COMMENT '分数',
DRAW FLOAT NOT NULL DEFAULT 0 COMMENT '抽水',
BANKER BOOLEAN NOT NULL DEFAULT FALSE COMMENT '本局是否庄家',
CREATE_TIME DATETIME NOT NULL COMMENT '记录时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'金币场游戏表';

DROP TABLE IF EXISTS ANCHOR;
CREATE TABLE ANCHOR
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ANCHOR_ID INT NOT NULL COMMENT '主播id',
ANCHOR_NAME VARCHAR(255) NOT NULL COMMENT '主播名称',
ANCHOR_TYPE VARCHAR(40) NOT NULL DEFAULT 'live' COMMENT 'live=主播 pusher=推币机 catcher=娃娃机',
PWD VARCHAR(255) NOT NULL COMMENT '密码',
CHANNEL VARCHAR(255) NOT NULL COMMENT '主播分配的Channel号',
TITLE VARCHAR(255) NOT NULL COMMENT '主播房间默认标题',
COST INT NOT NULL DEFAULT 0 COMMENT '进入主播房间默认消耗',
HISTORY_CUBE INT NOT NULL DEFAULT 0 COMMENT '',
ENCRYPTED BOOLEAN NOT NULL DEFAULT FALSE COMMENT '是否加密房间',
ROOM_PWD VARCHAR(20) NOT NULL DEFAULT '' COMMENT '加密密码',
ADMIN_IDS VARCHAR(255) DEFAULT '' COMMENT '直播房间管理员',
CREATE_TIME DATETIME NOT NULL COMMENT '主播创建时间',
PRIMARY KEY(ID),
UNIQUE KEY(ANCHOR_ID)
)COMMENT'主播账号';

DROP TABLE IF EXISTS ANCHOR_MACHINE;
CREATE TABLE ANCHOR_MACHINE
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ANCHOR_ID INT NOT NULL COMMENT '主播id',
MACHINE_MAC VARCHAR(255) NOT NULL COMMENT '设备MAC',
IS_ONLINE VARCHAR(255) NOT NULL COMMENT '在线状态：0未激活；1在线；2离线',
SUPPLIES VARCHAR(255) NOT NULL COMMENT '气罐剩余时长(s)',
IS_BINDING VARCHAR(255) NOT NULL COMMENT '0解绑1绑定//绑定解绑操作时会返回此参数',
STATUS VARCHAR(255) NOT NULL COMMENT '1、开启；2、关闭；3、解绑；4、绑定；5、开始换气；6、换气完毕；0、操作成功',
CREATE_TIME DATETIME NOT NULL COMMENT '记录创建时间',
UPDATE_TIME DATETIME NOT NULL COMMENT '记录更新时间',
PRIMARY KEY(ID),
UNIQUE KEY(ANCHOR_ID, MACHINE_MAC)
)COMMENT'主播青萌设备';

DROP TABLE IF EXISTS ANCHOR_BILL;
CREATE TABLE ANCHOR_BILL
(
ID INT NOT NULL AUTO_INCREMENT COMMENT 'ID',
ANCHOR_ID INT NOT NULL COMMENT '主播id',
ANCHOR_NAME VARCHAR(255) NOT NULL COMMENT '主播名称',
ANCHOR_TYPE VARCHAR(40) NOT NULL DEFAULT 'live' COMMENT 'live=主播 pusher=推币机 catcher=娃娃机',
BILL_TYPE VARCHAR(20) NOT NULL DEFAULT '' COMMENT 'enter=加入房间 gift=送礼',
ROOM_ID INT NOT NULL COMMENT '房间ID',
CHANNEL VARCHAR(255) NOT NULL COMMENT '声网频道',
USER_ID INT NOT NULL COMMENT '用户id',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
AMOUNT INT NOT NULL DEFAULT 0 COMMENT '金额',
RECORD_TIME DATETIME NOT NULL COMMENT '记录时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'主播账单';

DROP TABLE IF EXISTS LIVE_ROOM;
CREATE TABLE LIVE_ROOM
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
CHANNEL VARCHAR(255) NOT NULL COMMENT '声网频道',
ANCHOR INT NOT NULL COMMENT '主播id',
ANCHOR_NAME VARCHAR(255) NOT NULL COMMENT '主播名称',
ANCHOR_TYPE VARCHAR(40) NOT NULL DEFAULT 'live' COMMENT 'live=主播 pusher=推币机 catcher=娃娃机',
TITLE VARCHAR(255) NOT NULL COMMENT '房间标题',
COST INT NOT NULL DEFAULT 0 COMMENT '加入房间所需房卡数',
STATUS INT NOT NULL DEFAULT 0 COMMENT '0=直播中;1=已结束',
ONLINE_COUNT INT NOT NULL DEFAULT 0 COMMENT '在线人数',
MSG_COUNT INT NOT NULL DEFAULT 0 COMMENT '消息条数',
ENCRYPTED BOOLEAN NOT NULL DEFAULT FALSE COMMENT '是否加密房间',
PWD VARCHAR(20) NOT NULL DEFAULT '' COMMENT '加密密码',
ADMIN_IDS VARCHAR(255) DEFAULT '' COMMENT '直播房间管理员',
CREATE_TIME DATETIME NOT NULL COMMENT '房间创建时间',
END_TIME DATETIME NOT NULL COMMENT '房间结束时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'直播房间';

DROP TABLE IF EXISTS LIVE_GIFT;
CREATE TABLE LIVE_GIFT
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
GIFT_ID INT NOT NULL COMMENT '礼物id',
GIFT_NAME VARCHAR(255) NOT NULL COMMENT '礼物名称',
COST INT NOT NULL DEFAULT 0 COMMENT '送礼所需房卡数',
CROSS_ROOM BOOLEAN NOT NULL DEFAULT FALSE COMMENT '是否是跨房间礼品',
SPURT BOOLEAN NOT NULL DEFAULT FALSE COMMENT '是否喷气',
IS_VALID BOOLEAN NOT NULL DEFAULT TRUE COMMENT '是否有效',
PLAY_EFFECT BOOLEAN NOT NULL DEFAULT TRUE COMMENT '是否播放礼物特效',
ANIMATION VARCHAR(200) NOT NULL DEFAULT '' COMMENT '礼物特效动画',
VERSION VARCHAR(200) NOT NULL DEFAULT 'Normal' COMMENT '礼品所属版本',
GIFT_POSS VARCHAR(255) NOT NULL DEFAULT '' COMMENT '礼物中奖概率',
CREATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
UPDATE_TIME TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY(ID),
UNIQUE KEY(GIFT_ID)
)COMMENT'直播礼物';

DROP TABLE IF EXISTS LIVE_SEND_MSG;
CREATE TABLE LIVE_SEND_MSG
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
USER_ID INT NOT NULL COMMENT '用户id',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
ROOM_ID INT NOT NULL COMMENT '房间id',
ANCHOR INT NOT NULL COMMENT '主播id',
ANCHOR_NAME VARCHAR(255) NOT NULL COMMENT '主播名称',
MSG VARCHAR(255) NOT NULL COMMENT '用户发送的消息',
CROSS_ROOM BOOLEAN NOT NULL DEFAULT FALSE COMMENT '是否跨房间',
COST INT NOT NULL DEFAULT 0 COMMENT '消费',
ENCRYPTED BOOLEAN NOT NULL DEFAULT FALSE COMMENT '开播时是否加密',
ROOM_PWD VARCHAR(20) NOT NULL DEFAULT '' COMMENT '房间加密密码',
CREATE_TIME DATETIME NOT NULL COMMENT '消息发送时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'用户消息';

DROP TABLE IF EXISTS LIVE_SEND_GIFT;
CREATE TABLE LIVE_SEND_GIFT
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
USER_ID INT NOT NULL COMMENT '用户id',
USER_NAME VARCHAR(255) NOT NULL COMMENT '用户名,User Name',
ROOM_ID INT NOT NULL COMMENT '房间id',
ANCHOR INT NOT NULL COMMENT '主播id',
ANCHOR_NAME VARCHAR(255) NOT NULL COMMENT '主播名称',
GIFT_ID INT NOT NULL COMMENT '礼物id',
GIFT_NAME VARCHAR(255) NOT NULL COMMENT '礼物名称',
SPURTED BOOLEAN NOT NULL DEFAULT FALSE COMMENT '是否已喷气',
CROSS_ROOM BOOLEAN NOT NULL DEFAULT FALSE COMMENT '是否跨房间',
COST INT NOT NULL DEFAULT 0 COMMENT '礼物价格',
GIFT_COUNT INT NOT NULL DEFAULT 0 COMMENT '礼物数量',
CREATE_TIME DATETIME NOT NULL COMMENT '发送时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'用户送礼';

DROP TABLE IF EXISTS LIVE_WORDS;
CREATE TABLE LIVE_WORDS
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
WORDS VARCHAR(255) NOT NULL COMMENT '随机话语',
WEIGHT INT NOT NULL DEFAULT 1 COMMENT '概率权重',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'机器人随机言语';

DROP TABLE IF EXISTS LIVE_NAMES;
CREATE TABLE LIVE_NAMES
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
NAME VARCHAR(255) NOT NULL COMMENT '昵称',
WEIGHT INT NOT NULL DEFAULT 1 COMMENT '概率权重',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'机器人昵称';

DROP TABLE IF EXISTS TRANSFER;
CREATE TABLE TRANSFER
(
ID INT NOT NULL AUTO_INCREMENT COMMENT '主键',
FROM_ID VARCHAR(255) NOT NULL COMMENT '转出方ID',
FROM_NAME VARCHAR(255) NOT NULL COMMENT '转出方姓名',
AMOUNT INT NOT NULL COMMENT '金币转账数量',
FEE INT NOT NULL COMMENT '金币转账费用',
TO_ID VARCHAR(255) NOT NULL COMMENT '转入方ID',
TO_NAME VARCHAR(255) NOT NULL COMMENT '转入方姓名',
RECORD_TIME DATETIME NOT NULL COMMENT '发送时间',
PRIMARY KEY(ID),
UNIQUE KEY(ID)
)COMMENT'转账记录';